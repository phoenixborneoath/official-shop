<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Admin Phoenixborne Oath</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Inter, system-ui, sans-serif;
  background:#050507;
  color:#fff;
  padding:20px;
}
.card {
  background:#0b0b10;
  padding:16px;
  border-radius:12px;
  margin-bottom:20px;
}
input, button {
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  border:none;
}
input { background:#111; color:#fff; }
button { background:#ffd200; font-weight:bold; cursor:pointer; }
.hidden { display:none; }
</style>
</head>

<body>

<h1>Admin Phoenixborne Oath</h1>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h3>Login Admin</h3>
  <input type="password" id="adminPass" placeholder="Password admin">
  <button onclick="login()">Masuk</button>
</div>

<!-- PANEL -->
<div id="adminPanel" class="hidden">
  <h3>Daftar Produk</h3>
  <div id="product-list"></div>
</div>

<!-- FIREBASE + ADMIN LOGIC -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore, collection, getDocs, updateDoc, doc } 
  from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

/* CONFIG */
const firebaseConfig = {
  apiKey: "API_KEY_KAMU",
  authDomain: "phoenixborne-oath-shop.firebaseapp.com",
  projectId: "phoenixborne-oath-shop",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* LOGIN SEDERHANA (sementara) */
window.login = () => {
  const pass = document.getElementById("adminPass").value;
  if (pass !== "PB0-0ATH@2025!") return alert("Password salah");

  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("adminPanel").classList.remove("hidden");
  loadProducts();
};

/* LOAD PRODUCTS */
async function loadProducts() {
  const list = document.getElementById("product-list");
  list.innerHTML = "";

  const snap = await getDocs(collection(db, "products"));
  snap.forEach(d => {
    const p = d.data();
    const id = d.id;

    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
  <input placeholder="Nama Produk" value="${p.title}">
  <input type="number" placeholder="Harga" value="${p.price}">

  <input placeholder="Gambar 1" value="${p.images?.[0] || ""}">
  <input placeholder="Gambar 2" value="${p.images?.[1] || ""}">
  <input placeholder="Gambar 3" value="${p.images?.[2] || ""}">

  <label>
    <input type="checkbox" ${p.active ? "checked" : ""}> Aktif
  </label>
  <button>Simpan</button>
`;

    const inputs = div.querySelectorAll("input");
    div.querySelector("button").onclick = async () => {
      await updateDoc(doc(db,"products",id), {
  title: inputs[0].value,
  price: Number(inputs[1].value),
  images: [
    inputs[2].value,
    inputs[3].value,
    inputs[4].value
  ],
  active: inputs[5].checked
});

    list.appendChild(div);
  });
}
</script>

</body>
</html>
