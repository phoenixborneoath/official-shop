<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Admin – Phoenixborne Oath Shop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0b0b0b;
      color: white;
      padding: 20px;
    }
    input, button {
      padding: 8px;
      margin: 6px 0;
      width: 100%;
      max-width: 360px;
    }
    .box {
      background: #111;
      padding: 16px;
      margin-bottom: 20px;
      border-radius: 8px;
      border: 1px solid #333;
    }
  </style>
</head>
<body>

<h1>Admin Panel — Phoenixborne Oath</h1>
<p>Gunakan halaman ini untuk mengelola produk shop.</p>

<div class="box" id="login-box">
  <h3>Masuk Admin</h3>
  <input type="password" id="admin-pass" placeholder="Masukkan Password Admin">
  <button onclick="checkLogin()">Masuk</button>
</div>

<div id="admin-area" style="display:none;">
  <h2>Kelola Produk</h2>

  <div class="box">
    <h3>Tambah Produk Baru</h3>
    <input id="new-title" placeholder="Nama Produk">
    <input id="new-price" placeholder="Harga">
    <input id="new-desc" placeholder="Deskripsi Singkat">
    <input type="file" id="new-image">
    <button onclick="addProduct()">Tambah Produk</button>
  </div>

  <div id="product-list"></div>
</div>

<!-- Firebase config -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCKo4xRqM_w4iAKUeGbuE6_RcxbPUt22H8",
    authDomain: "phoenixborne-oath-shop.firebaseapp.com",
    projectId: "phoenixborne-oath-shop",
    storageBucket: "phoenixborne-oath-shop.appspot.com",
    messagingSenderId: "74677529022",
    appId: "1:74677529022:web:e021828e286d2b12c1831ef",
    measurementId: "G-HQEVCOFBYL"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const storage = getStorage(app);

  window.storage = storage; // biar bisa dipakai fungsi lain
</script>

<script>
  // Password admin
  const ADMIN_PASSWORD = "phoenixadmin"; // nanti bisa diganti

  function checkLogin() {
    const pass = document.getElementById("admin-pass").value;
    if (pass === ADMIN_PASSWORD) {
      document.getElementById("login-box").style.display = "none";
      document.getElementById("admin-area").style.display = "block";
      loadProducts();
    } else {
      alert("Password salah!");
    }
  }

  // Load produk dari products.json
  async function loadProducts() {
    const container = document.getElementById("product-list");
    const res = await fet
