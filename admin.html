<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Admin Phoenixborne Oath</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Inter, system-ui, sans-serif;
      background:#050507;
      color:#fff;
      padding:20px;
    }
    h1 { margin-bottom: 10px; }
    input, button {
      width:100%;
      padding:10px;
      margin:6px 0;
      border-radius:8px;
      border:none;
    }
    input { background:#111; color:#fff; }
    button {
      background:#ffd200;
      font-weight:bold;
      cursor:pointer;
    }
    .card {
      background:#0b0b10;
      padding:16px;
      border-radius:12px;
      margin-bottom:20px;
    }
    .hidden { display:none; }
  </style>
</head>
<body>

<h1>Admin Phoenixborne Oath</h1>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h3>Login Admin</h3>
  <input type="password" id="adminPass" placeholder="Password admin">
  <button onclick="login()">Masuk</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="hidden">
  <div class="card">
    <h3>Edit Produk</h3>

    <input id="docId" placeholder="Document ID (Firestore)">
    <input id="title" placeholder="Nama Produk">
    <input id="price" type="number" placeholder="Harga">
    <input id="image" placeholder="URL Gambar">
    <input id="slug" placeholder="Slug">
    
    <button onclick="saveProduct()">Simpan Perubahan</button>
  </div>
</div>

<!-- FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getFirestore, doc, updateDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

  const firebaseConfig = {
    if (pass === "phoenix123") {
    authDomain: "phoenixborne-oath-shop.firebaseapp.com",
    projectId: "phoenixborne-oath-shop"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // LOGIN (PASSWORD MANUAL)
  window.login = function () {
    const pass = document.getElementById("adminPass").value;
    if (pass === "phoenix123") {
      document.getElementById("loginBox").classList.add("hidden");
      document.getElementById("adminPanel").classList.remove("hidden");
    } else {
      alert("Password salah");
    }
  };

  // SAVE DATA
  window.saveProduct = async function () {
    const id = document.getElementById("docId").value;
    if (!id) return alert("Isi Document ID");

    await updateDoc(doc(db, "products", id), {
      title: document.getElementById("title").value,
      price: Number(document.getElementById("price").value),
      image: document.getElementById("image").value,
      slug: document.getElementById("slug").value
    });

    alert("Produk berhasil diupdate");
  };
</script>

</body>
</html>
